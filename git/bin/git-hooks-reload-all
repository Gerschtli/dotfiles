#!/usr/bin/env bash

source "${HOME}/.dotfiles-variables"

list=("${DOTFILES_ROOT}")
[[ -d "${DOTFILES_ROOT}/gpg" ]]       && list+=("${DOTFILES_ROOT}/gpg")
[[ -d "${DOTFILES_ROOT}/ssh" ]]       && list+=("${DOTFILES_ROOT}/ssh")
[[ -d "${HOME}/git/profitmax" ]]      && list+=("${HOME}/git/profitmax/"*/)
[[ -d "${HOME}/projects" ]]           && list+=("${HOME}/projects/"*/)
[[ -d "${HOME}/projects/profitmax" ]] && list+=("${HOME}/projects/profitmax/"*/)

for dir in "${list[@]}"; do
    if [[ -d "${dir}/.git" ]]; then
        pushd "${dir}" 1> /dev/null
        "${DOTFILES_ROOT}/git/bin/git-hooks-reload"
        popd 1> /dev/null
    fi
done
