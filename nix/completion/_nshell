#compdef nshell

LIST=()

prefix="${DOTFILES_ROOT}/nix/profiles/"
suffix=".nix"

for file in "${prefix}"*"${suffix}"; do
    tmp="${file#${prefix}}"
    LIST=("${tmp//${suffix}}" "${LIST}")
done

if [[ -e shell.nix || -e default.nix ]]; then
    LIST+=(".")
fi

_arguments \
    "1:nix-shell profiles:(${LIST})" \
    "*:options:(--clean --show-trace --command)"

# vim: ft=sh
