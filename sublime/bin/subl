#!/usr/bin/env bash

DIR=$( cd "$(dirname "$0")" && pwd -P )
SUBL=$(which subl3 || which sublime || which -a subl | grep -v "${DIR}" | head -n 1)

if [[ "$@" == "--get-executable" ]]; then
    echo "${SUBL}"
    [[ ! -z "${SUBL}" ]]
    exit "$?"
fi

if [[ -z "${SUBL}" ]]; then
    echo "ERROR: which -a subl -> "
    which -a subl
    exit 1
else
    nohup "${SUBL}" "$@" > /dev/null 2>&1 &
fi

exit 0
