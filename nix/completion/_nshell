#compdef nshell

LIST=()

prefix="${DOTFILES_ROOT}/nix/profiles/"
suffix=".nix"

for file in "${prefix}"*"${suffix}"; do
    tmp="${file#${prefix}}"
    LIST=("${tmp//${suffix}}" "${LIST}")
done

if [[ -e shell.nix ]]; then
    LIST+=("./shell")
fi

_arguments \
    "1:nix-shell profiles:(${LIST})" \
    "*:options:(--clean --show-trace --command)"
